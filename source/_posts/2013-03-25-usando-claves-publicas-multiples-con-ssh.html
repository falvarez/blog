---
layout: post
title: "Usando claves públicas múltiples con SSH"
summary: "La identificación por clave pública, una vez que la descubres, es una bendición. Exportas tu clave al servidor remoto y te olvidas de teclear la contraseña. Además de dicha comodidad, es la única forma de trabajar si tienes procesos automáticos que se conectan a servidores remotos (y no quieres tener la contraseña por ahí a la vista en un fichero)."
header_image: /uploads/2013/03/keychain-access-icon.png
main_image: /uploads/2013/03/keychain-access-icon.png
text_date: Lunes, 25 de marzo de 2013
tags: [ssh,tutorial,informática]
disqus_identifier: usando-claves-publicas-multiples-con-ssh
disqus_url: http://blog.falvarez.es/2013/03/usando-claves-publicas-multiples-con-ssh.html

---
<p>La identificación por clave pública, una vez que la descubres, es una bendición. Exportas tu clave al servidor remoto y te olvidas de teclear la contraseña. Además de dicha comodidad, es la única forma de trabajar si tienes procesos automáticos que se conectan a servidores remotos (y no quieres tener la contraseña por ahí a la vista en un fichero).</p><div><a href="/uploads/2013/03/keychain-access-icon.png" imageanchor="1"><img class="center-block img-responsive" border="0" height="400" src="/uploads/2013/03/keychain-access-icon.png" width="400"></a></div>
<p>Como decía, cuando le coges el aire ya no puedes parar, y el siguiente paso lógico es usar dicho esquema para conectarte a varios servidores.  Lo primero que se nos ocurre es usar la misma identidad para todos los servidores a los que nos vayamos a conectar. Pero eso no siempre es posible ni deseable.</p><p>Así que hay que decirle a SSH de alguna manera qué identidad ha de usar para cada servidor. Y lo haremos así, usando el fichero ~/.ssh/config (si no existe, hay que crearlo):</p><pre>Host SERVIDOR
<p>IdentityFile ~/.ssh/FICHERO_CLAVE_PRIVADA</p><p>User USUARIO</pre></p><p>Donde:</p><ul><li>SERVIDOR es la máquina a la que pretendemos conectar.</li>
<li>FICHERO_CLAVE_PRIVADA es el fichero de claves que hay que usar como identidad.</li>
<li>USUARIO es nuestro usuario en el sistema remoto (que no tiene por qué coincidir con el usuario local.</li>
</ul>
<p>Podemos usar wildcards para hacer referencia a dominios completos, por ejemplo, si como SERVIDOR introducimos *.dominio.com, podremos conectar con la misma identidad a host1.dominio.com, host2.dominio.com, etc.</p><p>Lo anteriormente expuesto ha sido probado tanto en Linux como en OS X. Supongo que los clientes SSH de Windows permitirán una configuración semejante.</p><p>Referencia (donde encontraremos algún truquillo más sobre el uso de SSH): <a href="http://www.evilsoft.org/2009/10/23/stupid-ssh-config-tricks">http://www.evilsoft.org/2009/10/23/stupid-ssh-config-tricks</a></p><small>Imagen obtenida de la web <a href="http://www.redmondpie.com/iphone-attack-reveals-passwords-in-6-minutes-video/">redmondpie.com</a>.</small>
